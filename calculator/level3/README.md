# 계산기 Lv 3

## 요구사항
- Enum, 제네릭, 람다 & 스트림을 활용하여 사칙연산 계산기 확장
  - 연산자를 Enum(Operator)으로 관리하여 코드 정리
  - 정수(int)뿐만 아니라 실수(double)도 연산 가능하도록 제네릭 적용
  - 연산 메서드(calculate())를 제네릭으로 수정하여 다양한 숫자 타입 지원
  - 저장된 연산 결과 중 특정 값보다 큰 값 조회 기능 추가 (Lambda & Stream 활용)
<br>

## 프로젝트 개요
Level 2에서 객체지향적으로 구현된 계산기를 더욱 확장하여,  
`Enum`, `제네릭`, `람다 & 스트림`을 활용한 유연한 계산기로 개선했습니다.
<br>

## 주요 기능
- 숫자, 연산자 입력받아 사칙연산 수행 (`+`, `-`, `*`, `/`)
- 정수, 실수 지원 (제네릭 `Operand<T>` 사용)
- 연산 결과를 리스트(List)로 저장
- 연산 기록 조회 (전체 조회)
- 연산 결과 검색 (보다 큰 값, 보다 작은 값, 일치하는 값)
- 연산 기록 삭제 (선택 또는 전체 삭제)
- 과학적 표기법 자동 적용 (소수점 8자리 이상, 정수 10자리 이상일 경우)
- 입력값 검증 및 예외 처리 포함  
<br>

## 패키지 구조

```bash
calculator.level3
│── ui
│   ├── App.java                    # 프로그램 실행 및 메뉴 제공
│   ├── InputValidator.java         # 사용자 입력 검증
│
│── model
│   ├── Operand.java                # 피연산자 (제네릭 사용)
│   ├── Operator.java               # 연산자 Enum (+, -, *, /)
│   ├── CalculationRecord.java      # 연산 기록 객체
│
│── service
│   ├── ArithmeticCalculator.java   # 연산 수행 및 기록 관리
│
│── exception
│   ├── CalculatorException.java    # 예외 처리 클래스
```
<br>

## 실행 흐름
1. 사용자가 실행할 메뉴 선택 (`1 ~ 5` 중 입력)
2. `1` 선택 → 두 개의 숫자와 연산자를 입력 후 연산 수행
3. `2` 선택 → 전체 연산 기록 조회
4. `3` 선택 → 연산 기록 삭제 (선택 또는 전체 삭제)
5. `4` 선택 → 연산 기록 검색 (보다 큰, 보다 작은, 일치하는 값)
6. `5` 선택 → 프로그램 종료
7. 잘못된 입력 시 예외 처리 후 다시 입력 요청  
<br>

## 실행 예제
```bash
--------- 계산기 Version 3.0 ---------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 1
-------------------------------------
* 첫 번째 숫자를 입력하세요: 123
* 사용할 연산자를 입력하세요: +
* 두 번째 숫자를 입력하세요: 45689
-------------------------------------
[ 123 + 45689 = 45812 ]
-------------------------------------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 1
-------------------------------------
* 첫 번째 숫자를 입력하세요: 134.15
* 사용할 연산자를 입력하세요: +
* 두 번째 숫자를 입력하세요: 4513
-------------------------------------
[ 134.15 + 4513 = 4647.15 ]
-------------------------------------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 1
-------------------------------------
* 첫 번째 숫자를 입력하세요: 4513
* 사용할 연산자를 입력하세요: *
* 두 번째 숫자를 입력하세요: 451.02
-------------------------------------
[ 4513 * 451.02 = 2035453.26 ]
-------------------------------------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 3
-------------------------------------
[1] [ 123 + 45689 = 45812 ]
[2] [ 134.15 + 4513 = 4647.15 ]
[3] [ 4513 * 451.02 = 2035453.26 ]
-------------------------------------
* 삭제할 기록의 번호를 입력하세요.
[취소: enter][전체: all 입력] 3
***** 계산 기록이 삭제되었습니다. *****
-------------------------------------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 2
-------------------------------------
[1] [ 123 + 45689 = 45812 ]
[2] [ 134.15 + 4513 = 4647.15 ]
-------------------------------------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 4
-------------------------------------
[1] 보다 큰 값 검색하기
[2] 보다 작은 값 검색하기
[3] 일치하는 값 검색하기
-------------------------------------
* 메뉴 번호를 입력하세요. [취소: enter] 1
* 기준 값을 입력하세요: 45000
-------------------------------------
[1] [ 123 + 45689 = 45812 ]
-------------------------------------
[1] 연산하기
[2] 연산 기록 조회하기
[3] 연산 기록 삭제하기
[4] 연산 결과 검색하기
[5] 종료하기
-------------------------------------
* 메뉴 번호를 입력하세요: 5
------------- 계산기 종료 -------------
```
<br>

## 주요 클래스
### `App.java` 메뉴 실행
- 사용자 입력을 받아 `ArithmeticCalculator`의 기능을 실행
- `InputValidator`를 활용하여 모든 입력값 검증
- 연산, 기록 조회, 기록 삭제, 결과 검색, 종료 기능 제공

### `ArithmeticCalculator.java` 연산 및 기록 관리
- 연산 수행 (`calculate`)
- 연산 기록 저장 (`updateRecord`)
- 연산 결과 포맷팅 (`formatOperand`)
- 연산 기록 조회 및 삭제 (`getRecords`, `removeRecord`, `clearRecords`)
- 과학적 표기법 적용 여부 (`useScientificNotation`)

### `Operand.java` 제네릭 피연산자
- 입력값을 다양한 숫자 타입(T)으로 저장
- `toBigDecimal()`을 활용하여 안전한 연산 가능
- 잘못된 값 입력 시 예외 처리 포함

### `Operator.java` 연산자 Enum
- Enum을 활용하여 `+`, `-`, `*`, `/` 연산을 정의
- 각 연산 메서드에서 `BigDecimal`을 활용한 정확한 계산 수행
- 0으로 나누는 경우 `CalculatorException` 발생

### `CalculationRecord.java` 연산 기록 객체
- 각 연산을 객체로 저장하여 일관된 기록 관리 가능
- toString()을 재정의하여 기록을 깔끔한 문자열 형태로 반환

### `InputValidator.java` 입력값 검증
- 메뉴 번호 입력 검증 (`getValidInt`)
- 숫자 입력 검증 (`getValidNumber`)
- 연산자 입력 검증 (`getValidOperator`)
- 연산 결과 검색 기능 (`selectRecordsWhere`)
- 연산 기록 삭제 기능 (`selectRecordToRemove`)

### `CalculatorException.java` 예외 처리
- 잘못된 입력값에 대해 예외를 발생시키고 적절한 메시지 반환
- 지원하는 예외 유형
  - `EMPTY_VALUE`: 입력값이 비어 있음
  - `INVALID_NUMBER`: 유효하지 않은 숫자 입력
  - `INVALID_OPERATOR`: 지원되지 않는 연산자 입력
  - `DIVISION_BY_ZERO`: 0으로 나누기 시도  
<br>

## 문제 해결 과정
- **[[내일배움캠프] 과제 - 계산기 3](https://velog.io/@ezro/camp-task-3)**